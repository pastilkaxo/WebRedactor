{"ast":null,"code":"import { Rect, Circle, Line, PencilBrush } from \"fabric\";\n\n// Добавление фигур по центру canvas\nexport function addFigure(canvas, type, options = {}) {\n  const canvasWidth = canvas.getWidth();\n  const canvasHeight = canvas.getHeight();\n  let shape;\n  switch (type) {\n    case \"rect\":\n      shape = new Rect({\n        width: 100,\n        height: 60,\n        ...options\n      });\n      break;\n    case \"circle\":\n      shape = new Circle({\n        radius: 50,\n        ...options\n      });\n      break;\n    case \"line\":\n      shape = new Line([0, 0, 100, 0], {\n        stroke: options.fill || \"black\",\n        ...options\n      });\n      break;\n    default:\n      return;\n  }\n  shape.set({\n    originX: \"center\",\n    originY: \"center\",\n    left: canvasWidth / 2,\n    top: canvasHeight / 2\n  });\n  canvas.add(shape);\n  canvas.setActiveObject(shape);\n  canvas.requestRenderAll();\n}\n\n// Изменение заливки выбранного объекта\nexport function fillSelected(canvas, color) {\n  const active = canvas.getActiveObject();\n  if (!active) return;\n  if (active.type === \"line\") {\n    active.set({\n      stroke: color\n    });\n  } else {\n    active.set({\n      fill: color\n    });\n  }\n  canvas.requestRenderAll();\n}\n\n// Включение карандаша\nexport function enablePencil(canvas, color = \"black\", width = 2) {\n  const brush = new PencilBrush(canvas);\n  brush.color = color;\n  brush.width = width;\n  canvas.freeDrawingBrush = brush;\n  canvas.isDrawingMode = true;\n}\n\n// Включение ластика (через PencilBrush с цветом фона)\nexport function enableEraser(canvas, backgroundColor = \"#ffffff\", width = 20) {\n  const brush = new PencilBrush(canvas);\n  brush.color = backgroundColor;\n  brush.width = width;\n  canvas.freeDrawingBrush = brush;\n  canvas.isDrawingMode = true;\n}\n\n// Выключение рисования\nexport function disableDrawing(canvas) {\n  canvas.isDrawingMode = false;\n}","map":{"version":3,"names":["Rect","Circle","Line","PencilBrush","addFigure","canvas","type","options","canvasWidth","getWidth","canvasHeight","getHeight","shape","width","height","radius","stroke","fill","set","originX","originY","left","top","add","setActiveObject","requestRenderAll","fillSelected","color","active","getActiveObject","enablePencil","brush","freeDrawingBrush","isDrawingMode","enableEraser","backgroundColor","disableDrawing"],"sources":["C:/Users/Vladislav/Desktop/WebIllustrator/WebPhotoIllustrator/src/Components/Main/Editor/FabricTools.js"],"sourcesContent":["import { Rect, Circle, Line, PencilBrush } from \"fabric\";\r\n\r\n// Добавление фигур по центру canvas\r\nexport function addFigure(canvas, type, options = {}) {\r\n  const canvasWidth = canvas.getWidth();\r\n  const canvasHeight = canvas.getHeight();\r\n\r\n  let shape;\r\n  switch (type) {\r\n    case \"rect\":\r\n      shape = new Rect({ width: 100, height: 60, ...options });\r\n      break;\r\n    case \"circle\":\r\n      shape = new Circle({ radius: 50, ...options });\r\n      break;\r\n    case \"line\":\r\n      shape = new Line([0, 0, 100, 0], { stroke: options.fill || \"black\", ...options });\r\n      break;\r\n    default:\r\n      return;\r\n  }\r\n\r\n  shape.set({\r\n    originX: \"center\",\r\n    originY: \"center\",\r\n    left: canvasWidth / 2,\r\n    top: canvasHeight / 2\r\n  });\r\n\r\n  canvas.add(shape);\r\n  canvas.setActiveObject(shape);\r\n  canvas.requestRenderAll();\r\n}\r\n\r\n// Изменение заливки выбранного объекта\r\nexport function fillSelected(canvas, color) {\r\n  const active = canvas.getActiveObject();\r\n  if (!active) return;\r\n\r\n  if (active.type === \"line\") {\r\n    active.set({ stroke: color });\r\n  } else {\r\n    active.set({ fill: color });\r\n  }\r\n  canvas.requestRenderAll();\r\n}\r\n\r\n// Включение карандаша\r\nexport function enablePencil(canvas, color = \"black\", width = 2) {\r\n  const brush = new PencilBrush(canvas);\r\n  brush.color = color;\r\n  brush.width = width;\r\n  canvas.freeDrawingBrush = brush;\r\n  canvas.isDrawingMode = true;\r\n}\r\n\r\n// Включение ластика (через PencilBrush с цветом фона)\r\nexport function enableEraser(canvas, backgroundColor = \"#ffffff\", width = 20) {\r\n  const brush = new PencilBrush(canvas);\r\n  brush.color = backgroundColor;\r\n  brush.width = width;\r\n  canvas.freeDrawingBrush = brush;\r\n  canvas.isDrawingMode = true;\r\n}\r\n\r\n// Выключение рисования\r\nexport function disableDrawing(canvas) {\r\n  canvas.isDrawingMode = false;\r\n}\r\n"],"mappings":"AAAA,SAASA,IAAI,EAAEC,MAAM,EAAEC,IAAI,EAAEC,WAAW,QAAQ,QAAQ;;AAExD;AACA,OAAO,SAASC,SAASA,CAACC,MAAM,EAAEC,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACpD,MAAMC,WAAW,GAAGH,MAAM,CAACI,QAAQ,CAAC,CAAC;EACrC,MAAMC,YAAY,GAAGL,MAAM,CAACM,SAAS,CAAC,CAAC;EAEvC,IAAIC,KAAK;EACT,QAAQN,IAAI;IACV,KAAK,MAAM;MACTM,KAAK,GAAG,IAAIZ,IAAI,CAAC;QAAEa,KAAK,EAAE,GAAG;QAAEC,MAAM,EAAE,EAAE;QAAE,GAAGP;MAAQ,CAAC,CAAC;MACxD;IACF,KAAK,QAAQ;MACXK,KAAK,GAAG,IAAIX,MAAM,CAAC;QAAEc,MAAM,EAAE,EAAE;QAAE,GAAGR;MAAQ,CAAC,CAAC;MAC9C;IACF,KAAK,MAAM;MACTK,KAAK,GAAG,IAAIV,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE;QAAEc,MAAM,EAAET,OAAO,CAACU,IAAI,IAAI,OAAO;QAAE,GAAGV;MAAQ,CAAC,CAAC;MACjF;IACF;MACE;EACJ;EAEAK,KAAK,CAACM,GAAG,CAAC;IACRC,OAAO,EAAE,QAAQ;IACjBC,OAAO,EAAE,QAAQ;IACjBC,IAAI,EAAEb,WAAW,GAAG,CAAC;IACrBc,GAAG,EAAEZ,YAAY,GAAG;EACtB,CAAC,CAAC;EAEFL,MAAM,CAACkB,GAAG,CAACX,KAAK,CAAC;EACjBP,MAAM,CAACmB,eAAe,CAACZ,KAAK,CAAC;EAC7BP,MAAM,CAACoB,gBAAgB,CAAC,CAAC;AAC3B;;AAEA;AACA,OAAO,SAASC,YAAYA,CAACrB,MAAM,EAAEsB,KAAK,EAAE;EAC1C,MAAMC,MAAM,GAAGvB,MAAM,CAACwB,eAAe,CAAC,CAAC;EACvC,IAAI,CAACD,MAAM,EAAE;EAEb,IAAIA,MAAM,CAACtB,IAAI,KAAK,MAAM,EAAE;IAC1BsB,MAAM,CAACV,GAAG,CAAC;MAAEF,MAAM,EAAEW;IAAM,CAAC,CAAC;EAC/B,CAAC,MAAM;IACLC,MAAM,CAACV,GAAG,CAAC;MAAED,IAAI,EAAEU;IAAM,CAAC,CAAC;EAC7B;EACAtB,MAAM,CAACoB,gBAAgB,CAAC,CAAC;AAC3B;;AAEA;AACA,OAAO,SAASK,YAAYA,CAACzB,MAAM,EAAEsB,KAAK,GAAG,OAAO,EAAEd,KAAK,GAAG,CAAC,EAAE;EAC/D,MAAMkB,KAAK,GAAG,IAAI5B,WAAW,CAACE,MAAM,CAAC;EACrC0B,KAAK,CAACJ,KAAK,GAAGA,KAAK;EACnBI,KAAK,CAAClB,KAAK,GAAGA,KAAK;EACnBR,MAAM,CAAC2B,gBAAgB,GAAGD,KAAK;EAC/B1B,MAAM,CAAC4B,aAAa,GAAG,IAAI;AAC7B;;AAEA;AACA,OAAO,SAASC,YAAYA,CAAC7B,MAAM,EAAE8B,eAAe,GAAG,SAAS,EAAEtB,KAAK,GAAG,EAAE,EAAE;EAC5E,MAAMkB,KAAK,GAAG,IAAI5B,WAAW,CAACE,MAAM,CAAC;EACrC0B,KAAK,CAACJ,KAAK,GAAGQ,eAAe;EAC7BJ,KAAK,CAAClB,KAAK,GAAGA,KAAK;EACnBR,MAAM,CAAC2B,gBAAgB,GAAGD,KAAK;EAC/B1B,MAAM,CAAC4B,aAAa,GAAG,IAAI;AAC7B;;AAEA;AACA,OAAO,SAASG,cAAcA,CAAC/B,MAAM,EAAE;EACrCA,MAAM,CAAC4B,aAAa,GAAG,KAAK;AAC9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}