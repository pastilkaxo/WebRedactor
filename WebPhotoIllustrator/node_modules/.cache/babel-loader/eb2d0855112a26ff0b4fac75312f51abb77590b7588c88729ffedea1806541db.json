{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vladislav\\\\Desktop\\\\WebIllustrator\\\\WebPhotoIllustrator\\\\src\\\\Components\\\\Main\\\\Editor\\\\CanvasFunctions\\\\EditorContent.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport { fabric } from \"fabric\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditorContent({\n  canvasRef,\n  fabricRef,\n  setPointerCords,\n  setZoom,\n  handleToolClick,\n  addRectangle\n}) {\n  _s();\n  const [isMobile, setIsMobile] = React.useState(false);\n  const [isTablet, setIsTablet] = React.useState(false);\n  const [isDesktop, setIsDesktop] = React.useState(false);\n  useEffect(() => {\n    const checkScreenSize = () => {\n      const width = window.innerWidth;\n      setIsMobile(width <= 768);\n      setIsTablet(width > 768 && width <= 1024);\n      setIsDesktop(width > 1024);\n    };\n    checkScreenSize();\n    window.addEventListener(\"resize\", checkScreenSize);\n    return () => window.removeEventListener(\"resize\", checkScreenSize);\n  }, []);\n  useEffect(() => {\n    if (!canvasRef.current) return;\n    const container = canvasRef.current.parentElement;\n\n    // Инициализация canvas один раз\n    if (!fabricRef.current) {\n      const canvas = new fabric.Canvas(canvasRef.current, {\n        backgroundColor: \"white\",\n        selection: true,\n        preserveObjectStacking: true\n      });\n      fabricRef.current = canvas;\n    }\n    const canvas = fabricRef.current;\n\n    // --- ResizeObserver для CSS scaling ---\n    const resizeCanvas = () => {\n      requestAnimationFrame(() => {\n        if (!canvas || !canvasRef.current || !container) return;\n        const {\n          width,\n          height\n        } = container.getBoundingClientRect();\n        if (width && height) {\n          canvas.setWidth(width);\n          canvas.setHeight(height);\n          canvas.renderAll();\n        }\n      });\n    };\n    const resizeObserver = new ResizeObserver(resizeCanvas);\n    resizeObserver.observe(container);\n    resizeCanvas();\n\n    // --- Zoom колесом ---\n    const handleMouseWheel = e => {\n      e.e.preventDefault();\n      let zoom = canvas.getZoom();\n      zoom *= 0.999 ** e.e.deltaY;\n      zoom = Math.min(Math.max(zoom, 0.01), 20);\n      const point = new fabric.Point(e.e.offsetX, e.e.offsetY);\n      canvas.zoomToPoint(point, zoom);\n      setZoom(zoom);\n    };\n\n    // --- Pan мышью ---\n    let isDragging = false;\n    let lastPosX = 0;\n    let lastPosY = 0;\n    const handleMouseDown = e => {\n      if (e.e.altKey || e.e.ctrlKey) {\n        isDragging = true;\n        canvas.selection = false;\n        lastPosX = e.e.clientX;\n        lastPosY = e.e.clientY;\n        canvas.setCursor(\"grab\");\n      }\n    };\n    const handleMouseMove = e => {\n      if (isDragging) {\n        const vpt = canvas.viewportTransform;\n        vpt[4] += e.e.clientX - lastPosX;\n        vpt[5] += e.e.clientY - lastPosY;\n        canvas.requestRenderAll();\n        lastPosX = e.e.clientX;\n        lastPosY = e.e.clientY;\n        canvas.setCursor(\"grabbing\");\n      } else {\n        const pointer = canvas.getPointer(e.e);\n        setPointerCords({\n          x: Math.round(pointer.x),\n          y: Math.round(pointer.y)\n        });\n      }\n    };\n    const handleMouseUp = () => {\n      isDragging = false;\n      canvas.selection = true;\n      canvas.setCursor(\"default\");\n    };\n    const handleClearCords = () => setPointerCords({\n      x: 0,\n      y: 0\n    });\n\n    // --- Pinch-to-zoom ---\n    let lastTouchDistance = null;\n    const getTouchDistance = touches => {\n      const [t1, t2] = touches;\n      return Math.sqrt(Math.pow(t2.clientX - t1.clientX, 2) + Math.pow(t2.clientY - t1.clientY, 2));\n    };\n    const handleTouchStart = e => {\n      if (e.e.touches.length === 2) lastTouchDistance = getTouchDistance(e.e.touches);\n    };\n    const handleTouchMove = e => {\n      if (e.e.touches.length === 2 && lastTouchDistance) {\n        e.e.preventDefault();\n        const currentDistance = getTouchDistance(e.e.touches);\n        let zoom = canvas.getZoom() * (currentDistance / lastTouchDistance);\n        zoom = Math.min(Math.max(zoom, 0.01), 20);\n        const centerX = (e.e.touches[0].clientX + e.e.touches[1].clientX) / 2;\n        const centerY = (e.e.touches[0].clientY + e.e.touches[1].clientY) / 2;\n        const point = new fabric.Point(centerX, centerY);\n        canvas.zoomToPoint(point, zoom);\n        setZoom(zoom);\n        lastTouchDistance = currentDistance;\n      }\n    };\n    const handleTouchEnd = () => {\n      lastTouchDistance = null;\n    };\n\n    // --- Подписка на события ---\n    canvas.on(\"mouse:wheel\", handleMouseWheel);\n    canvas.on(\"mouse:down\", handleMouseDown);\n    canvas.on(\"mouse:move\", handleMouseMove);\n    canvas.on(\"mouse:up\", handleMouseUp);\n    canvas.on(\"mouse:out\", handleClearCords);\n    canvas.on(\"touch:gesture\", handleTouchStart);\n    canvas.on(\"touch:drag\", handleTouchMove);\n    canvas.on(\"touch:orientation\", handleTouchEnd);\n    canvas.on(\"touch:end\", handleTouchEnd);\n    return () => {\n      resizeObserver.disconnect();\n      // Не вызываем canvas.dispose(), он нужен для Editor.jsx\n    };\n  }, [canvasRef, fabricRef, setPointerCords, setZoom]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"editor-content\",\n    children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n      id: \"tool-actions\",\n      children: [[[\"arrange\", \"Перемещение\", addRectangle], [\"selection\", \"Выделение\", null], [\"crop\", \"Обрезание\", null], [\"figures\", \"Фигура\", null], [\"eraser\", \"Ластик\", null], [\"cut\", \"Вырезать\", null], [\"fill\", \"Заливка\", null], [\"gradient\", \"Градиент\", null], [\"zoom\", \"Лупа\", null], [\"picker\", \"Пипетка\", null], [\"text\", \"Текст\", null], [\"pencil\", \"Карандаш\", null], [\"hand\", \"Рука\", null], [\"lasso\", \"Лассо\", null]].map(([tool, title, action]) => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"tool-action\",\n        onClick: () => {\n          handleToolClick(tool);\n          action && action();\n        },\n        children: /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: title,\n          arrow: true,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `/Images/EditorIcons/${tool}.png`,\n            alt: tool\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }, this)\n      }, tool, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"tool-action\",\n        children: /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"\\u0413\\u043B\\u0430\\u0432\\u043D\\u044B\\u0439 \\u0446\\u0432\\u0435\\u0442\",\n          arrow: true,\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"color\",\n            id: \"main-color\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"tool-action\",\n        children: /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"\\u0412\\u0442\\u043E\\u0440\\u0438\\u0447\\u043D\\u044B\\u0439 \\u0446\\u0432\\u0435\\u0442\",\n          arrow: true,\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"color\",\n            id: \"secondary-color\",\n            defaultValue: \"#ffffff\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"canvas-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          width: \"100%\",\n          height: \"100%\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 5\n  }, this);\n}\n_s(EditorContent, \"nQzOKaE28kFsjSYa97jsjfWqXpE=\");\n_c = EditorContent;\nvar _c;\n$RefreshReg$(_c, \"EditorContent\");","map":{"version":3,"names":["React","useEffect","fabric","Tooltip","jsxDEV","_jsxDEV","EditorContent","canvasRef","fabricRef","setPointerCords","setZoom","handleToolClick","addRectangle","_s","isMobile","setIsMobile","useState","isTablet","setIsTablet","isDesktop","setIsDesktop","checkScreenSize","width","window","innerWidth","addEventListener","removeEventListener","current","container","parentElement","canvas","Canvas","backgroundColor","selection","preserveObjectStacking","resizeCanvas","requestAnimationFrame","height","getBoundingClientRect","setWidth","setHeight","renderAll","resizeObserver","ResizeObserver","observe","handleMouseWheel","e","preventDefault","zoom","getZoom","deltaY","Math","min","max","point","Point","offsetX","offsetY","zoomToPoint","isDragging","lastPosX","lastPosY","handleMouseDown","altKey","ctrlKey","clientX","clientY","setCursor","handleMouseMove","vpt","viewportTransform","requestRenderAll","pointer","getPointer","x","round","y","handleMouseUp","handleClearCords","lastTouchDistance","getTouchDistance","touches","t1","t2","sqrt","pow","handleTouchStart","length","handleTouchMove","currentDistance","centerX","centerY","handleTouchEnd","on","disconnect","className","children","id","map","tool","title","action","onClick","arrow","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","type","defaultValue","ref","style","_c","$RefreshReg$"],"sources":["C:/Users/Vladislav/Desktop/WebIllustrator/WebPhotoIllustrator/src/Components/Main/Editor/CanvasFunctions/EditorContent.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { fabric } from \"fabric\";\r\nimport Tooltip from \"@mui/material/Tooltip\";\r\n\r\nexport default function EditorContent({\r\n  canvasRef,\r\n  fabricRef,\r\n  setPointerCords,\r\n  setZoom,\r\n  handleToolClick,\r\n  addRectangle\r\n}) {\r\n  const [isMobile, setIsMobile] = React.useState(false);\r\n  const [isTablet, setIsTablet] = React.useState(false);\r\n  const [isDesktop, setIsDesktop] = React.useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkScreenSize = () => {\r\n      const width = window.innerWidth;\r\n      setIsMobile(width <= 768);\r\n      setIsTablet(width > 768 && width <= 1024);\r\n      setIsDesktop(width > 1024);\r\n    };\r\n    checkScreenSize();\r\n    window.addEventListener(\"resize\", checkScreenSize);\r\n    return () => window.removeEventListener(\"resize\", checkScreenSize);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!canvasRef.current) return;\r\n\r\n    const container = canvasRef.current.parentElement;\r\n\r\n    // Инициализация canvas один раз\r\n    if (!fabricRef.current) {\r\n      const canvas = new fabric.Canvas(canvasRef.current, {\r\n        backgroundColor: \"white\",\r\n        selection: true,\r\n        preserveObjectStacking: true\r\n      });\r\n      fabricRef.current = canvas;\r\n    }\r\n\r\n    const canvas = fabricRef.current;\r\n\r\n    // --- ResizeObserver для CSS scaling ---\r\nconst resizeCanvas = () => {\r\n  requestAnimationFrame(() => {\r\n    if (!canvas || !canvasRef.current || !container) return;\r\n    const { width, height } = container.getBoundingClientRect();\r\n    if (width && height) {\r\n      canvas.setWidth(width);\r\n      canvas.setHeight(height);\r\n      canvas.renderAll();\r\n    }\r\n  });\r\n};\r\n\r\n\r\n    const resizeObserver = new ResizeObserver(resizeCanvas);\r\n    resizeObserver.observe(container);\r\n    resizeCanvas();\r\n\r\n    // --- Zoom колесом ---\r\n    const handleMouseWheel = (e) => {\r\n      e.e.preventDefault();\r\n      let zoom = canvas.getZoom();\r\n      zoom *= 0.999 ** e.e.deltaY;\r\n      zoom = Math.min(Math.max(zoom, 0.01), 20);\r\n      const point = new fabric.Point(e.e.offsetX, e.e.offsetY);\r\n      canvas.zoomToPoint(point, zoom);\r\n      setZoom(zoom);\r\n    };\r\n\r\n    // --- Pan мышью ---\r\n    let isDragging = false;\r\n    let lastPosX = 0;\r\n    let lastPosY = 0;\r\n\r\n    const handleMouseDown = (e) => {\r\n      if (e.e.altKey || e.e.ctrlKey) {\r\n        isDragging = true;\r\n        canvas.selection = false;\r\n        lastPosX = e.e.clientX;\r\n        lastPosY = e.e.clientY;\r\n        canvas.setCursor(\"grab\");\r\n      }\r\n    };\r\n\r\n    const handleMouseMove = (e) => {\r\n      if (isDragging) {\r\n        const vpt = canvas.viewportTransform;\r\n        vpt[4] += e.e.clientX - lastPosX;\r\n        vpt[5] += e.e.clientY - lastPosY;\r\n        canvas.requestRenderAll();\r\n        lastPosX = e.e.clientX;\r\n        lastPosY = e.e.clientY;\r\n        canvas.setCursor(\"grabbing\");\r\n      } else {\r\n        const pointer = canvas.getPointer(e.e);\r\n        setPointerCords({ x: Math.round(pointer.x), y: Math.round(pointer.y) });\r\n      }\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n      isDragging = false;\r\n      canvas.selection = true;\r\n      canvas.setCursor(\"default\");\r\n    };\r\n\r\n    const handleClearCords = () => setPointerCords({ x: 0, y: 0 });\r\n\r\n    // --- Pinch-to-zoom ---\r\n    let lastTouchDistance = null;\r\n    const getTouchDistance = (touches) => {\r\n      const [t1, t2] = touches;\r\n      return Math.sqrt(\r\n        Math.pow(t2.clientX - t1.clientX, 2) +\r\n        Math.pow(t2.clientY - t1.clientY, 2)\r\n      );\r\n    };\r\n\r\n    const handleTouchStart = (e) => {\r\n      if (e.e.touches.length === 2) lastTouchDistance = getTouchDistance(e.e.touches);\r\n    };\r\n\r\n    const handleTouchMove = (e) => {\r\n      if (e.e.touches.length === 2 && lastTouchDistance) {\r\n        e.e.preventDefault();\r\n        const currentDistance = getTouchDistance(e.e.touches);\r\n        let zoom = canvas.getZoom() * (currentDistance / lastTouchDistance);\r\n        zoom = Math.min(Math.max(zoom, 0.01), 20);\r\n\r\n        const centerX = (e.e.touches[0].clientX + e.e.touches[1].clientX) / 2;\r\n        const centerY = (e.e.touches[0].clientY + e.e.touches[1].clientY) / 2;\r\n        const point = new fabric.Point(centerX, centerY);\r\n\r\n        canvas.zoomToPoint(point, zoom);\r\n        setZoom(zoom);\r\n        lastTouchDistance = currentDistance;\r\n      }\r\n    };\r\n\r\n    const handleTouchEnd = () => { lastTouchDistance = null; };\r\n\r\n    // --- Подписка на события ---\r\n    canvas.on(\"mouse:wheel\", handleMouseWheel);\r\n    canvas.on(\"mouse:down\", handleMouseDown);\r\n    canvas.on(\"mouse:move\", handleMouseMove);\r\n    canvas.on(\"mouse:up\", handleMouseUp);\r\n    canvas.on(\"mouse:out\", handleClearCords);\r\n    canvas.on(\"touch:gesture\", handleTouchStart);\r\n    canvas.on(\"touch:drag\", handleTouchMove);\r\n    canvas.on(\"touch:orientation\", handleTouchEnd);\r\n    canvas.on(\"touch:end\", handleTouchEnd);\r\n\r\n    return () => {\r\n      resizeObserver.disconnect();\r\n      // Не вызываем canvas.dispose(), он нужен для Editor.jsx\r\n    };\r\n  }, [canvasRef, fabricRef, setPointerCords, setZoom]);\r\n\r\n  return (\r\n    <div className=\"editor-content\">\r\n      <ul id=\"tool-actions\">\r\n        {[\r\n          [\"arrange\", \"Перемещение\",addRectangle],\r\n          [\"selection\", \"Выделение\",null],\r\n          [\"crop\", \"Обрезание\",null],\r\n          [\"figures\", \"Фигура\",null],\r\n          [\"eraser\", \"Ластик\",null],\r\n          [\"cut\", \"Вырезать\",null],\r\n          [\"fill\", \"Заливка\",null],\r\n          [\"gradient\", \"Градиент\",null],\r\n          [\"zoom\", \"Лупа\",null],\r\n          [\"picker\", \"Пипетка\",null],\r\n          [\"text\", \"Текст\",null],\r\n          [\"pencil\", \"Карандаш\",null],\r\n          [\"hand\", \"Рука\",null],\r\n          [\"lasso\", \"Лассо\",null]\r\n        ].map(([tool, title, action]) => (\r\n          <li key={tool} className=\"tool-action\" onClick={() => { handleToolClick(tool); action && action(); }}>\r\n            <Tooltip title={title} arrow>\r\n              <img src={`/Images/EditorIcons/${tool}.png`} alt={tool} />\r\n            </Tooltip>\r\n          </li>\r\n        ))}\r\n        <li className=\"tool-action\">\r\n          <Tooltip title=\"Главный цвет\" arrow>\r\n            <input type=\"color\" id=\"main-color\" />\r\n          </Tooltip>\r\n        </li>\r\n        <li className=\"tool-action\">\r\n          <Tooltip title=\"Вторичный цвет\" arrow>\r\n            <input type=\"color\" id=\"secondary-color\" defaultValue=\"#ffffff\" />\r\n          </Tooltip>\r\n        </li>\r\n      </ul>\r\n      <div className=\"canvas-wrapper\">\r\n          <canvas ref={canvasRef} style={{ width: \"100%\", height: \"100%\" }} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}